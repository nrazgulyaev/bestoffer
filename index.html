<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js" crossorigin></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" crossorigin></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js" crossorigin></script>
<script src="https://cdn.jsdelivr.net/npm/lz-string@1.5.0/libs/lz-string.min.js" crossorigin></script>

<!-- ДИАГНОСТИКА + ОТЛОЖЕННЫЙ СТАРТ -->
<script>
  (function(){
    // Поймаем любые ранние ошибки и покажем их вверху страницы
    const box = document.createElement('div');
    box.id = 'boot-diagnostics';
    box.style.cssText = 'position:fixed;left:10px;top:10px;z-index:99999;background:#1b2336;color:#fff;border:1px solid #334;padding:8px 10px;border-radius:8px;font:12px/1.4 system-ui;max-width:80vw;display:none';
    document.addEventListener('DOMContentLoaded',()=>document.body.appendChild(box));
    const log = (msg)=>{ box.style.display='block'; box.innerHTML += (box.innerHTML?'<br>':'') + msg; };

    window.addEventListener('error', e => log('JS error: ' + (e?.message||e)));
    window.addEventListener('unhandledrejection', e => log('Promise error: ' + (e?.reason?.message||e?.reason||e)));

    // Проверим загрузку критичных библиотек
    let tries = 0;
    const tick = () => {
      const okReact = !!(window.React && window.ReactDOM);
      const okBabel = !!window.Babel;
      const okLZ = !!window.LZString;

      if (!okReact) log('React не загрузился (CDN заблокирован?)');
      if (!okBabel) log('Babel не загрузился — JSX не скомпилируется');
      if (!okLZ) log('LZString не загрузился — «Поделиться» может не работать');

      if (okReact && okBabel) {
        // запустим компиляцию скриптов с type="text/babel"
        try { window.Babel.transformScriptTags(); } catch(e){ log('Babel.transformScriptTags() error: '+e.message); }
        return;
      }
      tries++;
      if (tries < 30) setTimeout(tick, 200); // ждём до ~6 секунд
      else log('Истёк таймаут ожидания библиотек — проверь блокировщики/фаервол/CDN');
    };
    setTimeout(tick, 0);
  })();
</script>

<!-- А ВОТ ТУТ — ТВОЙ СКРИПТ С JSX -->
<script type="text/babel" data-presets="env,react">
  /* здесь остаётся весь твой код v7.6 как есть */
</script>
